<project>
	<import file="sys.xml"/>
	<import file="task.xml"/>
	<import file="vdl-lib.xml"/>
	<import file="vdl-sc.k"/>
	
	<set names="sites, tcfile, clusteringEnabled, clusteringQueueDelay, clusteringMinTime">
		<vdl:configProperty name="sites.file"/>
		<vdl:configProperty name="tc.file"/>
		<vdl:configProperty name="clustering.enabled"/>
		<vdl:configProperty name="clustering.queue.delay"/>
		<vdl:configProperty name="clustering.min.time"/>
	</set>
	
	<set names="hostSubmitThrottle, submitThrottle, maxTransfers, maxFileOperations">
		<vdl:configProperty name="throttle.host.submit"/>
		<vdl:configProperty name="throttle.submit"/>
		<vdl:configProperty name="throttle.transfers"/>
		<vdl:configProperty name="throttle.file.operations"/>
	</set>
	
	<log level="info"><string>Using sites file: {sites}</string></log>
	<log level="info"><string>Using tc.data: {tcfile}</string></log>
  
	<scheduler type="vds-adaptive" shareID="vdl2:scheduler:{sites}">
		<property name="transformationCatalogFile" value="{tcfile}"/>
		<property name="clusteringEnabled" value="{clusteringEnabled}"/>
		<property name="clusteringQueueDelay" value="{clusteringQueueDelay}"/>
		<property name="clusteringMinTime" value="{clusteringMinTime}"/>
		
		<property name="hostSubmitThrottle" value="{hostSubmitThrottle}"/>
		<property name="submitThrottle" value="{submitThrottle}"/>
		<property name="jobsPerCpu" value="999999"/>
		<property name="maxTransfers" value="{maxTransfers}"/>
		<property name="maxFileOperations" value="{maxFileOperations}"/>
		
		<!-- maybe this is a more sensible value than the default of 2 -->
		<property name="jobThrottle" value="4"/>
		
		<task:availableHandlers type="execution"/>
		<task:availableHandlers type="file"/>
		
		<vdl:siteCatalog file="{sites}"/>
	</scheduler>
</project>
